---
// const path = Astro.url.pathname;
import ayllukaypi from "@images/ayllukaypi.png";
import ayllukaypiWebp from "@images/ayllukaypi.webp";
import ayllukaypiAvif from "@images/ayllukaypi.avif";
---

<header
   class="fixed top-0 left-0 w-full z-50 transition-[padding,_background] duration-300 ease-out py-5"
   id="header"
>
   <nav class="group navbar">
      <div
         class="lg:max-w-5xl xl:max-w-7xl mx-auto w-full max-lg:group-[.navbar]:block relative grow group-[.navbar]:flex group-[.navbar]:items-stretch"
      >
         <div class="flex items-stretch shrink-0 min-h-[4rem]">
            <a class="flex items-center relative grow-0 shrink-0 px-3" href="#">
               <picture>
                  <source srcset={ayllukaypiAvif} type="image/avif" />
                  <source srcset={ayllukaypiWebp} type="image/webp" />
                  <img
                     class="max-h-40"
                     width="150"
                     height="47"
                     src={ayllukaypi}
                     alt="Ayllu Kaypi - Aquí hogar, Aquí familia"
                  />
               </picture>
            </a>
            <div
               class="hidden items-center gap-3 ml-auto lg:hidden px-3"
               id="navbar-mobile-content"
            >
               <button
                  data-target="navbar-mobile"
                  class="inline-flex items-center p-2 text-sm text-gray-300 rounded-md lg:hidden hover:bg-azul focus:outline-none focus:ring-2 focus:ring-[#4d5b87] navbar-burger"
                  aria-controls="navbar-default"
                  aria-expanded="false"
                  aria-label="menu"
               >
                  <svg
                     class="w-6 h-6"
                     aria-hidden="true"
                     fill="currentColor"
                     viewBox="0 0 20 20"
                     xmlns="http://www.w3.org/2000/svg"
                  >
                     <path
                        fill-rule="evenodd"
                        d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z"
                        clip-rule="evenodd"></path>
                  </svg>
               </button>
            </div>
         </div>
         <nav
            class="navbar-menu hidden top-0 lg:grow lg:shrink-0 lg:flex lg:items-stretch max-lg:shadow-lg max-lg:py-2 max-lg:px-0 max-lg:overflow-auto max-lg:items-center max-lg:grow max-lg:shrink-0 transition"
            id="navbar-mobile"
            aria-labelledby="header-navigation"
         >
            <h2 class="sr-only" id="header-navigation">Menú de Navegación</h2>

            <ul
               class="font-bold group lg:flex lg:items-center justify-end ml-auto"
            >
               <li>
                  <a
                     class="transition hover:text-white/80 py-2 px-3 uppercase block shrink-0 grow-0 relative md:flex md:items-center text-gray-100"
                     href="#"
                  >
                     Inicio
                  </a>
               </li>

               <li>
                  <a
                     class="transition hover:text-white/80 py-2 px-3 uppercase block shrink-0 grow-0 relative md:flex md:items-center text-gray-100"
                     href="#"
                  >
                     Nosotros
                  </a>
               </li>

               <li>
                  <a
                     class="transition hover:text-white/80 py-2 px-3 uppercase block shrink-0 grow-0 relative md:flex md:items-center text-gray-100"
                     href="#"
                  >
                     Contacto
                  </a>
               </li>
            </ul>
         </nav>
      </div>
   </nav>
</header>

<style>
   /* #navbar-mobile {
      display: none;
   } */
   #header.home {
      background-color: #062e51;
      padding: 0;
   }
</style>

<script>
   addEventListener("scroll", () => {
      const header = document.querySelector("#header");
      const navbarMobile = document.querySelector("#navbar-mobile-content");

      header.classList.toggle("home", window.scrollY > 0);
      navbarMobile.classList.toggle("!flex", window.scrollY > 0);
   });

   const $navbarBurger = document.querySelector(".navbar-burger");

   $navbarBurger.addEventListener("click", () => {
      // Get the target from the "data-target" attribute
      const target = $navbarBurger.dataset.target;
      const $target = document.getElementById(target);

      // Toggle the "is-active" class on both the "navbar-burger" and the "navbar-menu"
      $navbarBurger.classList.toggle("max-lg:block");
      $target.classList.toggle("max-lg:block");
   });
</script>
